package com.chengxin.global;import java.util.ArrayList;import java.util.List;import android.content.Intent;import android.os.Bundle;import android.os.Parcelable;import android.view.View;import android.widget.AdapterView;import android.widget.AdapterView.OnItemClickListener;import android.widget.ListView;import com.chengxin.BaseActivity;import com.chengxin.R;import com.chengxin.Entity.CheckItem;import com.chengxin.adapter.CheckListAdapter;public class CheckListActivity extends BaseActivity implements OnItemClickListener {	private List<CheckItem> mList = new ArrayList<CheckItem>();	private ListView mlistView;	private CheckListAdapter mAdapter;	private String mTitle;		@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		mContext = this;		if (getIntent().hasExtra("data")) {			List< CheckItem > list = (List< CheckItem >)(ArrayList<? extends Parcelable>)getIntent().getParcelableArrayListExtra("data");						if (list != null && list.size() > 0) {				mList.addAll(list);			}		}				if (getIntent().hasExtra("title")) {			mTitle = getIntent().getStringExtra("title");		} else {			mTitle = "选择";		}		setContentView(R.layout.activity_checklist);		initCompent();	}	private void initCompent() {		setTitleContent(R.drawable.back_btn,R.drawable.ok_btn, mTitle);		mLeftBtn.setOnClickListener(this);		mRightBtn.setOnClickListener(this);				mlistView = (ListView)findViewById(R.id.listView1);		mlistView.setOnItemClickListener(this);				showData();	}	private void showData() {		if (mAdapter == null) {			mAdapter = new CheckListAdapter(mContext, mList);			mlistView.setAdapter(mAdapter);		} else {			mAdapter.notifyDataSetChanged();;		}	}	@Override	public void onClick(View v) {		super.onClick(v);		switch (v.getId()) {		case R.id.left_btn:			this.finish();			break;		case R.id.right_btn:			commit();			break;		}	}	private void commit() {//		String ids = "";//		String names = "";//		//		for (int i = 0; i < mList.size(); i++) {//			CheckItem item = mList.get(i);//			//			if (item.isChecked) {//				if (ids.length() > 0) {//					ids += ",";//					names += ";";//				}//				//				ids += item.id;//				names += item.name;//			}//		}//		Intent intent = new Intent();//		intent.putExtra("selectedIds", ids);//		intent.putExtra("selectedNames", names);		intent.putParcelableArrayListExtra("data", (ArrayList<? extends Parcelable>) mList );		setResult(RESULT_OK, intent);		this.finish();			}	@Override	public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {		CheckItem item = mList.get(arg2);		item.isChecked = !item.isChecked;	}}