package com.chengxin.adapter;import java.util.List;import android.content.Context;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.TextView;import com.chengxin.R;import com.chengxin.Entity.MerchantInfo;import com.chengxin.global.ImageLoader;public class MerchantInfoAdapter extends BaseAdapter {	public interface OnMerchantInfoClickListener {		public void onPhone(View v, int Position, String phone);		public void onChat(View v, int Position, int uid);	}	public int type = 0;		private List<MerchantInfo> mList;	private Context mContext;	private LayoutInflater mInflater;	private ImageLoader mImageLoader;	private OnMerchantInfoClickListener mOnClickListener = null;	public void setOnMerchantInfoClickListener(OnMerchantInfoClickListener l) {		mOnClickListener = l;	}		public MerchantInfoAdapter(Context context, List<MerchantInfo> list) {		super();		this.mList = list;		this.mContext = context;		mInflater = LayoutInflater.from(context);		mImageLoader = new ImageLoader();	}	@Override	public int getCount() {		return mList.size();	}	@Override	public Object getItem(int position) {		return mList.get(position);	}	@Override	public long getItemId(int position) {		return Integer.valueOf(mList.get(position).id).longValue();	}	@Override	public View getView(final int position, View convertView, ViewGroup parent) {		ViewHolder holder;		if (convertView == null) {			convertView = mInflater.inflate(R.layout.merchant_info_item, null);			holder = new ViewHolder();			holder.logo = (ImageView)convertView.findViewById(R.id.logo);						holder.name = (TextView)convertView.findViewById(R.id.name);			holder.feature = (TextView)convertView.findViewById(R.id.features);			holder.address = (TextView)convertView.findViewById(R.id.address);			holder.distance = (TextView)convertView.findViewById(R.id.distance);			holder.btnChat = (TextView)convertView.findViewById(R.id.btn_asking);			holder.btnPhone = (TextView)convertView.findViewById(R.id.phone_call);			convertView.setTag(holder);		}else{			holder = (ViewHolder) convertView.getTag();		}		final MerchantInfo item = mList.get(position);		String szlogo = item.getSmallPictureByNmae("logo");				if (szlogo != null && !szlogo.equals("") && !szlogo.equals("null")) {			mImageLoader.getBitmap(mContext, holder.logo, null, szlogo, 0, false, true, false);		}				String name = "";				if (item.name != null && !item.name.equals("") && !item.name.equals("null")) {			name = name + item.name;		}				holder.name.setText(name);		String szFeature = item.content;				if (szFeature != null && !szFeature.equals("") && !szFeature.equals("null")) {			holder.feature.setText("特色: " + szFeature);		}				if (item.address != null && !item.address.equals("") && !item.address.equals("null")) {			holder.address.setText("地址: " + item.address);		}		if (item.distance > 0) {			holder.distance.setText("距离" + item.distance / 1000 + "公里");		}				holder.btnPhone.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				if (mOnClickListener != null) {					mOnClickListener.onPhone(v, position, item.phone);				}			}		});				holder.btnChat.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				if (mOnClickListener != null) {					mOnClickListener.onChat(v, position, Integer.valueOf(item.uid));				}			}		});		return convertView;	}		public static class ViewHolder {		public ImageView logo;		public TextView name;		public TextView feature; 		public TextView address;		public TextView distance;		public TextView btnPhone;		public TextView btnChat;		@Override		public int hashCode() {			return logo.hashCode() + name.hashCode()					+ feature.hashCode() + address.hashCode()					+ btnPhone.hashCode() + btnChat.hashCode()					+ distance.hashCode();		}	}}